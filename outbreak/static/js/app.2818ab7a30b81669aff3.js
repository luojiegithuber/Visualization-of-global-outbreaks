webpackJsonp([1],{"0+fA":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},i,!1,function(t){a("aw1J")},null,null).exports,o=a("/ocq"),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),a("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),a("br"),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},s,!1,function(t){a("OVGu")},"data-v-d8ec41bc",null).exports;var l=a("//Fk"),c=a.n(l),u=a("mtWM"),d=a.n(u),h={data:function(){return{worldData:[],simple_worldData:[],namemap:[],myChart:""}},beforeCreate:function(){var t=this;this.bus.$on("toWorldMap",function(e){t.findObjByName(e)})},mounted:function(){this.getWorld()},methods:{getWorld:function(){var t=this;d.a.get("static/world.json").then(function(e){t.namemap=e.data.namemap}),new c.a(function(t,e){d.a.get("static/world.json").then(function(e){e.data.namemap;t()})}).then(function(){return d.a.get("/api/globalOutbreak/getNewslist").then(function(e){console.log(e);var a=e.data.message;t.worldData=e.data.message,a.forEach(function(e,a,n){var i=e.provinceName,r=e.currentConfirmedCount,o=new Object;o.name=i,o.value=r,t.simple_worldData.push(o)});var n=t.namemap,i=t.simple_worldData;t.drawChart(n,i)})})},drawChart:function(t,e){var a=this,n=this.$echarts.init(document.getElementById("chart"));window.addEventListener("resize",function(){n.resize()}),n.setOption({tooltip:{trigger:"item",formatter:function(t){return t.data.name+": "+t.data.value}},visualMap:{type:"continuous",show:!1,min:0,max:1e5,textStyle:{fontSize:14,color:"#fff"},realtime:!1,calculable:!0,inRange:{color:["#eae0e0","#a80002"]}},series:[{type:"map",name:"世界地图",mapType:"world",roam:!0,label:{show:!1},itemStyle:{areaColor:"#65ff42",borderWidth:.5,borderColor:"#000",borderType:"solid"},emphasis:{label:{show:!0,color:"#fff"},itemStyle:{areaColor:"#4b81ff"}},nameMap:t,data:e}]}),n.on("click",function(t){a.findObjByName(t.name)})},findObjByName:function(t){this.toLine(t);var e=this.worldData.find(function(e){if(e.provinceName==t)return e});this.toPie(e)},toPie:function(t){this.bus.$emit("toPie",t)},toLine:function(t){this.bus.$emit("toLine",t)}}},f={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"chart",attrs:{id:"chart"}})])}]};var m=a("VU/8")(h,f,!1,function(t){a("WvRd")},null,null).exports,p={data:function(){return{scatterData:[]}},created:function(){},mounted:function(){this.initScatterPlot(),this.getScatterPlotData()},methods:{toWorldMap:function(t){this.bus.$emit("toWorldMap",t)},getScatterPlotData:function(){var t=this;d()({url:"/api/outbreaks/getAll_CAGR",method:"get"}).then(function(e){t.scatterData=[],t.scatterData=e.data.message,console.log(t.scatterData),t.initScatterPlot()})},initScatterPlot:function(){var t=this,e=this.$echarts.init(document.getElementById("scatter"));e.setOption({grid:{left:"3%",right:"7%",bottom:"3%",containLabel:!0},tooltip:{showDelay:0,formatter:function(t){return t.value.length>1?t.value[2]+" :<br/>复合增长率："+t.value[1]+"%<br/>现存确诊："+t.value[0]:t.value},axisPointer:{show:!0,type:"cross",lineStyle:{type:"dashed",width:1}}},toolbox:{feature:{dataZoom:{},brush:{type:["rect","polygon","clear"]}}},brush:{},legend:{left:"center"},xAxis:[{type:"value",scale:!0,axisLabel:{formatter:"{value} ",textStyle:{color:"#fff"}},lineStyle:{color:"#fff"},color:"#fff",splitLine:{show:!1}}],yAxis:[{type:"value",scale:!0,lineStyle:{color:"#fff"},axisLabel:{formatter:"{value}% ",textStyle:{color:"#fff"}},color:"#fff",splitLine:{show:!1}}],series:[{type:"scatter",data:this.scatterData,itemStyle:{normal:{label:{show:!1,formatter:"{c}"}}},markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{lineStyle:{type:"solid"},data:[{type:"average",name:"平均值"},{xAxis:5e4}]}}]}),e.on("click",function(e){var a=e.data[2];t.toWorldMap(a)})}}},v={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"scatter"}})])}]};var g=a("VU/8")(p,v,!1,function(t){a("0+fA")},null,null).exports,_={data:function(){return{pieData:[],name:""}},created:function(){var t=this;this.bus.$on("toPie",function(e){t.pieData=[],t.name=e.provinceName,0!=e.currentConfirmedCount&&t.pieData.push({value:e.currentConfirmedCount,name:"现存确诊"}),0!=e.deadCount&&t.pieData.push({value:e.deadCount,name:"死亡病例"}),0!=e.curedCount&&t.pieData.push({value:e.curedCount,name:"治愈病例"}),t.initPie()})},mounted:function(){this.initPie()},methods:{initPie:function(){this.$echarts.init(document.getElementById("piechart")).setOption({series:[{name:"访问来源",type:"pie",radius:"55%",data:this.pieData,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{show:!0,formatter:"{b} : {c} ({d}%)"},labelLine:{show:!0}}}}]})}}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",{attrs:{id:"piechart_title"}},[this._v(this._s(this.name)+"病例比例")]),this._v(" "),e("div",{attrs:{id:"piechart"}})])},staticRenderFns:[]};var y=a("VU/8")(_,b,!1,function(t){a("vw9A")},null,null).exports,w=a("ifoU"),C=a.n(w),x={data:function(){return{LineChart_data:[],name:"",currentConfirmedCount:[],curedCount:[],deadCount:[],day_Arr:[]}},computed:{},created:function(){var t=this;this.dayArr(),this.getSevendayData(),this.bus.$on("toLine",function(e){t.name=e,t.getCountByName(e),t.initLine()})},mounted:function(){this.initLine()},methods:{dayArr:function(){var t,e=[],a=new C.a;a.set(0,"周日"),a.set(1,"周一"),a.set(2,"周二"),a.set(3,"周三"),a.set(4,"周四"),a.set(5,"周五"),a.set(6,"周六"),t=(new Date).getHours()<12?(new Date).getDay()-1:(new Date).getDay();for(var n=7;n;)t++,e.push(a.get(t%7)),n--;this.day_Arr=e},getSevendayData:function(){var t=this;d()({url:"/api/outbreaks/getAll2",method:"get"}).then(function(e){t.LineChart_data=e})},getCountByName:function(t){var e=this.LineChart_data.data.message.find(function(e){if(e.name==t)return e});this.currentConfirmedCount=e.currentConfirmedCount.slice(-7),this.curedCount=e.curedCount.slice(-7),this.deadCount=e.deadCount.slice(-7)},initLine:function(){this.$echarts.init(document.getElementById("linechart")).setOption({title:{show:!1,text:this.name+"近七日疫情情况",x:"center",y:"bottom",textStyle:{color:"#fff"}},tooltip:{trigger:"axis"},legend:{data:["现存病例","治愈病例","死亡病例"],textStyle:{color:"#fff"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.day_Arr,color:"#fff",axisLine:{lineStyle:{color:"#fff"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#fff"}}},series:[{name:"现存病例",type:"line",data:this.currentConfirmedCount},{name:"死亡病例",type:"line",data:this.deadCount},{name:"治愈病例",type:"line",data:this.curedCount}]})}}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",{attrs:{id:"linechart_title"}},[this._v(this._s(this.name)+"近7日病例增长趋势")]),this._v(" "),e("div",{attrs:{id:"linechart"}})])},staticRenderFns:[]};var k=a("VU/8")(x,D,!1,function(t){a("abl+")},null,null).exports,A={data:function(){return{globalData:[],confirmedIncr_Arr:[],currentConfirmedIncr_Arr:[],curedIncr_Arr:[],deadIncr_Arr:[],day_Arr:[]}},created:function(){},mounted:function(){this.dayArr(),this.initGlobalChart(),this.getGlobalChartData()},methods:{dayArr:function(){var t,e=[],a=new C.a;a.set(0,"周日"),a.set(1,"周一"),a.set(2,"周二"),a.set(3,"周三"),a.set(4,"周四"),a.set(5,"周五"),a.set(6,"周六"),t=(new Date).getHours()<12?(new Date).getDay()-1:(new Date).getDay();for(var n=7;n;)t++,e.push(a.get(t%7)),n--;this.day_Arr=e},getGlobalChartData:function(){var t=this;d()({url:"/api/globalOutbreak/getInc",method:"get"}).then(function(e){t.globalPieData=[],console.log(e);var a=e.data.message;t.confirmedIncr_Arr=a.confirmedIncr.slice(-7),t.currentConfirmedIncr_Arr=a.currentConfirmedIncr.slice(-7),t.curedIncr_Arr=a.curedIncr.map(function(t){return-t}).slice(-7),t.deadIncr_Arr=a.deadIncr.map(function(t){return-t}).slice(-7),t.initGlobalChart()})},initGlobalChart:function(){this.$echarts.init(document.getElementById("globalchart")).setOption({tooltip:{trigger:"axis",extraCssText:"width:150px;height:100px;",axisPointer:{type:"shadow"},formatter:function(t){for(var e=[],a=0;a<t.length;a++)1==a||2==a?e.push('<i style="display: inline-block;width: 10px;height: 10px;background: '+t[a].color+';margin-right: 5px;border-radius: 50%;}"></i><span style="width:70px; display:inline-block;">'+t[a].seriesName+":"+-t[a].data+"</span>&nbsp&nbsp"):e.push('<i style="display: inline-block;width: 10px;height: 10px;background: '+t[a].color+';margin-right: 5px;border-radius: 50%;}"></i><span style="width:70px; display:inline-block;">'+t[a].seriesName+":"+t[a].data+"</span>&nbsp&nbsp");return'<div class="showBox">'+e.join("<br>")+"</div>"}},legend:{data:["新增现存确诊","新增死亡","新增治愈","新增确诊"],textStyle:{color:"#fff"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"value",axisLine:{lineStyle:{color:"#fff"}}}],yAxis:[{type:"category",axisLine:{lineStyle:{color:"#fff"}},axisTick:{show:!1},data:this.day_Arr}],series:[{name:"新增现存确诊",type:"bar",label:{show:!0,position:"inside"},data:this.currentConfirmedIncr_Arr},{name:"新增死亡",type:"bar",stack:"总量",label:{show:!1,formatter:function(t){return-t.data}},data:this.deadIncr_Arr},{name:"新增治愈",type:"bar",stack:"总量",label:{show:!1,position:"left",formatter:function(t){return-t.data}},data:this.curedIncr_Arr},{name:"新增确诊",type:"bar",stack:"总量",label:{show:!0},data:this.confirmedIncr_Arr}]})}}},S={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",{attrs:{id:"globalchart_title"}},[this._v("海外各病例较昨日增长柱状图")]),this._v(" "),e("div",{attrs:{id:"globalchart"}})])}]};var P=a("VU/8")(A,S,!1,function(t){a("fFgv")},null,null).exports,I={data:function(){return{globalPieData:[],currentConfirmedCount_change:"",deadCount_change:"",curedCount_change:"",change:[]}},created:function(){},mounted:function(){this.initGlobalPie(),this.getGlobalPieData()},methods:{getGlobalPieData:function(){var t=this;d()({url:"/api/globalOutbreak/getInc",method:"get"}).then(function(e){t.globalPieData=[];var a=e.data.message.newslist[0];0!=a.currentConfirmedCount&&t.globalPieData.push({value:a.currentConfirmedCount,name:"现存确诊"}),0!=a.deadCount&&t.globalPieData.push({value:a.deadCount,name:"累计死亡"}),0!=a.curedCount&&t.globalPieData.push({value:a.curedCount,name:"累计治愈"}),t.change.push(a.currentConfirmedIncr),t.change.push(a.deadIncr),t.change.push(a.curedIncr),t.initGlobalPie()})},initGlobalPie:function(){var t=this;this.$echarts.init(document.getElementById("globalpie")).setOption({tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{name:"访问来源",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center",formatter:function(e){var a=e.dataIndex;return t.change[a]>0?e.name+":"+e.value+"\n\n比较昨日：+"+t.change[a]:e.name+":"+e.value+"\n\n比较昨日："+t.change[a]}},emphasis:{label:{show:!0,fontSize:"20",fontWeight:"bold"}},labelLine:{show:!1},data:this.globalPieData}]})}}},$={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",{attrs:{id:"globalpie_title"}},[this._v("海外病例比例图")]),this._v(" "),e("div",{attrs:{id:"globalpie"}})])}]};var E=a("VU/8")(I,$,!1,function(t){a("zcHo")},null,null).exports,L={data:function(){return{date:"",time:"",week:["SUN","MON","TUE","WED","THU","FRI","SAT"],timerID:null,radio:"1"}},created:function(){this.timerID=setInterval(this.updateTime,1e3),this.updateTime()},watch:{radio:function(t){this.$parent.changeMain(t)}},methods:{updateTime:function(){var t=new Date;12==t.getHours()&&5==t.getMinutes()&&0==t.getSeconds()&&(this.$parent.getNewData(),console.log("数据有更新，请刷新界面")),23==t.getHours()&&55==t.getMinutes()&&0==t.getSeconds()&&(this.$parent.getNewData(),console.log("数据有更新，请刷新界面")),this.time=this.zeroPadding(t.getHours(),2)+":"+this.zeroPadding(t.getMinutes(),2)+":"+this.zeroPadding(t.getSeconds(),2),this.date=this.zeroPadding(t.getFullYear(),4)+"-"+this.zeroPadding(t.getMonth()+1,2)+"-"+this.zeroPadding(t.getDate(),2)+" "+this.week[t.getDay()]},zeroPadding:function(t,e){for(var a="",n=0;n<e;n++)a+="0";return(a+t).slice(-e)}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"clock"},[a("p",{staticClass:"title"},[t._v("世界的疫情天眼")]),a("hr"),a("p"),t._v(" "),a("p",{staticClass:"date"},[t._v(t._s(t.date))]),t._v(" "),a("p",{staticClass:"time"},[t._v(t._s(t.time))]),t._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("世界地图")]),t._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("散点图")])],1),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clock"},[a("p",{staticClass:"title"},[t._v("公告栏")]),a("hr"),a("p"),t._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("p",{staticClass:"text"},[t._v("● 请点击地图上的国家地区完成交互动作")]),t._v(" "),a("p",{staticClass:"text"},[t._v("● 绿色部分不一定代表国家没有疫情，也有可能是没有收录数据")]),t._v(" "),a("p",{staticClass:"text"},[t._v("● 若有疑问联系作者1015779635@qq.com")]),t._v(" "),a("p",{staticClass:"text"},[t._v("● 每日中午12:00以及23:55更新数据")])])])}]};var N=a("VU/8")(L,O,!1,function(t){a("hhZF")},null,null).exports,F={components:{"my-worldmap":m,"my-piechart":y,"my-linechart":k,"my-globalchart":P,"my-globalpie":E,"my-clock":N,"my-scatter":g},data:function(){return{isMap:!0,isScatter:!1,radio:1}},created:function(){var t=this;document.onkeydown=function(e){var a=e||event||window.event||arguments.callee.caller.arguments[0];if(a&&113==a.keyCode){var n=prompt("请输入你的操作：");"手动更新"==n?(t.getNewData(),alert("手动更新操作执行")):"删除重复"==n?(t.deleteRepeat(),alert("删除重复")):alert("无用的操作")}}},methods:{changeMain:function(t){"1"==t?(this.isMap=!0,this.isScatter=!1):(this.isMap=!1,this.isScatter=!0)},getNewData:function(){this.getData(),this.getData3()},getData:function(){var t=this;new c.a(function(t,e){d()({url:"/Feiyanapi/txapi/ncovabroad/index?key=8904de751142e1a252a8e864174bb93d",method:"get"}).then(function(e){return t(e.data.newslist)})}).then(function(e){console.log("得到网络上的数据了，现在第二次请求"),t.postOutbreak(e),t.updateNewslist(e)})},getData2:function(){var t=this;new c.a(function(t,e){d()({url:"/Feiyanapi/txapi/ncovabroad/index?key=8904de751142e1a252a8e864174bb93d",method:"get"}).then(function(e){return t(e.data.newslist)})}).then(function(e){t.updateNewslist(e)})},getData3:function(){var t=this;new c.a(function(t,e){d()({url:"/Feiyanapi/txapi/ncov/index?key=8904de751142e1a252a8e864174bb93d",method:"get"}).then(function(e){return t(e.data.newslist[0].desc.foreignStatistics)})}).then(function(e){t.updateInc(e)})},updateNewslist:function(t){d()({url:"/api/globalOutbreak/updateNewslist",method:"post",data:{data:t}}).then(function(t){console.log(t)})},updateInc:function(t){d()({url:"/api/globalOutbreak/updateInc",method:"post",data:{data:t}}).then(function(t){console.log(t)})},postOutbreak:function(t){d()({url:"/api/outbreaks/newAll",method:"post",data:{data:t}}).then(function(t){console.log(t)})},seeBack:function(){d()({url:"/api/outbreaks/hello",method:"get"}).then(function(t){console.log(t)})}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"pie_line_contain"},[a("my-globalpie"),a("br"),t._v(" "),a("my-globalchart")],1),t._v(" "),a("div",{staticClass:"pie_line_contain"},[a("my-clock"),a("br"),a("br"),t._v(" "),t.isMap?a("my-worldmap"):t._e(),t._v(" "),t.isScatter?a("my-scatter"):t._e()],1),t._v(" "),a("div",{staticClass:"pie_line_contain"},[a("my-piechart"),a("br"),t._v(" "),a("my-linechart")],1)])},staticRenderFns:[]};var j=a("VU/8")(F,M,!1,function(t){a("e6k5")},null,null).exports;n.default.use(o.a);var R=new o.a({routes:[{path:"/Home",name:"Home",component:j},{path:"/Scatter",name:"Scatter",component:g},{path:"/PieChart",name:"PieChart",component:y},{path:"/clock",name:"clock",component:N}]}),W=a("XLwt"),z=a.n(W),B=a("zL8q"),G=a.n(B);a("tvR6"),a("9OQl");n.default.prototype.$echarts=z.a,n.default.config.productionTip=!1,n.default.use(G.a),n.default.prototype.bus=new n.default,new n.default({el:"#app",router:R,components:{App:r},template:"<App/>"})},OVGu:function(t,e){},WvRd:function(t,e){},"abl+":function(t,e){},aw1J:function(t,e){},e6k5:function(t,e){},fFgv:function(t,e){},hhZF:function(t,e){},tvR6:function(t,e){},vw9A:function(t,e){},zcHo:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2818ab7a30b81669aff3.js.map